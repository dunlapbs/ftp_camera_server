version: '3.8'

services:
  ftp-camera-server:
    build: .
    container_name: ftp-camera-server
    restart: unless-stopped

    # Use host network mode for FTP passive mode compatibility
    network_mode: host

    # Mount camera uploads directory
    volumes:
      - ${UPLOADS_DIRECTORY:-./camera_uploads}:/var/ftp/camera_uploads

    # Environment variables
    environment:
      - FTP_USER=${FTP_USER:-ftpuser}
      - FTP_PASSWORD=${FTP_PASSWORD:-camera123}

    # Optional: Use .env file
    env_file:
      - .env

    # Logging
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
